{"version":3,"sources":["webpack:///webpack/bootstrap dddde87e50b495fc049c","webpack:///./server.js","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"dotenv\"","webpack:///./src/datasources/todoist.js","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"unirest\"","webpack:///./src/datasources/pinboard.js","webpack:///external \"babel-runtime/core-js/object/values\"","webpack:///external \"node-pinboard\"","webpack:///./src/datasources/gcal.js","webpack:///external \"moment\"","webpack:///external \"google-calendar\"","webpack:///./src/datasources/evernote.js","webpack:///external \"evernote\"","webpack:///./src/datasources/gmail.js","webpack:///external \"node-gmail-api\"","webpack:///./src/models/screens.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/core-js/get-iterator\"","webpack:///./src/models/screens.json","webpack:///external \"path\"","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"passport\"","webpack:///external \"passport-google-oauth\"","webpack:///external \"passport-evernote\"","webpack:///external \"express-session\"","webpack:///external \"socket.io\"","webpack:///external \"feedparser\"","webpack:///external \"request\"","webpack:///./src/datasources/rss.js","webpack:///external \"enml-js\"","webpack:///./src/datasources/pocket.js","webpack:///external \"passport-pocket\"","webpack:///external \"passport-todoist\""],"names":[],"mappings":"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AAR,CAAY,KAAK,UAAL,CAAgB,KAAhB,EAAZ;AACA,qBAAQ,OAAR,IAAmB,KAAK,UAAL,CAAgB,KAAhB,EAAnB;AACA;AACD;AACD,cAAK,YAAL;AACE,mBAAQ,OAAR,IAAmB,KAAK,UAAL,CAAgB,KAAhB,EAAnB;AACA;AACF,cAAK,UAAL;AACE,mBAAQ,OAAR,IAAmB,KAAK,QAAL,CAAc,cAAd,CAA6B,IAA7B,CAAnB;AACA;AACF,cAAK,QAAL;AACE,mBAAQ,OAAR,IAAmB,KAAK,MAAL,CAAY,cAAZ,EAAnB;AACA;AA7BJ;AA+BA,cAAO,OAAP;AACD;;;;;mBAhHkB,O;;;;;;ACFrB,iE;;;;;;ACAA,gE;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA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","file":"server_built.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap dddde87e50b495fc049c\n **/","// config\nimport dotenv from 'dotenv'\ndotenv.config() // load up environment variables from a .env file (which is gitignored)\nconst env = process.env.NODE_ENV\nlet syncIntervalMins = (env == 'production') ? 5 : 1\n\n// authentication\nconst passport = require('passport')\nconst GoogleStrategy = require('passport-google-oauth').OAuth2Strategy\nconst EvernoteStrategy = require('passport-evernote').Strategy\nconst PocketStrategy = require('passport-pocket')\nconst TodoistStrategy = require('passport-todoist').Strategy\n\n// datasources - FIXME REFACTOR these out soon!\nimport DataSourceTodoist from './src/datasources/todoist'\nimport DataSourcePinboard from './src/datasources/pinboard'\nimport DataSourceGCal from './src/datasources/gcal'\nimport DataSourceEvernote from './src/datasources/evernote'\nimport DataSourceGmail from './src/datasources/gmail'\nimport DataSourceRSS from './src/datasources/rss'\nimport DataSourcePocket from './src/datasources/pocket'\n\nconst todoist = new DataSourceTodoist()\nconst pinboard = new DataSourcePinboard()\nconst gcal = new DataSourceGCal()\nconst evernote = new DataSourceEvernote()\nconst gmail = new DataSourceGmail()\nconst github = new DataSourceRSS('https://github.com/gr4yscale.private.atom?token=ABR7vJyTAveF-XiCVdDQtRgJRs4-v1NKks61mHcZwA==')\nconst creativeai = new DataSourceRSS('http://www.creativeai.net/feed.xml')\nconst hackernews = new DataSourceRSS('http://news.ycombinator.com/rss')\nconst vox = new DataSourceRSS('http://www.vox.com/rss/index.xml')\nconst pocket = new DataSourcePocket()\n\nimport Screens from './src/models/screens'\nconst screens = new Screens(todoist, pinboard, gcal, evernote, gmail, github, creativeai, hackernews, pocket)\n\n// API server\nimport path from 'path'\nimport express from 'express'\nimport bodyParser from 'body-parser'\n\nconst app = express()\nconst session = require('express-session')\napp.use(bodyParser.urlencoded({\n  extended: true\n}))\napp.use(bodyParser.json())\napp.use(session({ secret: 'yeauhhhhh', resave: true, saveUninitialized: true}))\napp.use(passport.initialize())\n\nlet basePath = ''\nif (env == 'production') {\n  basePath = '/public/'\n} else {\n  basePath = '/../src/static/';\n}\n\napp.get('/screens', function(req, res) {\n  res.send(screens.screens())\n})\n\napp.get('/', (req, res) => {\n  res.sendFile(path.resolve(__dirname + basePath + 'index.html'))\n})\n\napp.get('/app.js', (req, res) => {\n  res.sendFile(path.resolve(__dirname + basePath + 'app.js'));\n})\n\napp.get('/app.js.map', (req, res) => {\n  res.sendFile(path.resolve(__dirname + basePath + 'app.js.map'));\n})\n\napp.get('/style.css', (req, res) => {\n  res.sendFile(path.resolve(__dirname + basePath + 'style.css'));\n})\n\napp.get('/style.css.map', (req, res) => {\n  res.sendFile(path.resolve(__dirname + basePath + 'style.css.map'));\n})\n\n// authentication routes\n\napp.get('/auth/google', passport.authenticate('google', { session: false } ))\napp.get('/auth/google/callback',\n  passport.authenticate('google', { session: false, failureRedirect: '/login' }),\n  (req, res) => {\n    gcal.setAccessToken(req.user.accessToken)\n    gmail.setAccessToken(req.user.accessToken)\n    sync()\n    res.redirect('/')\n  }\n)\n\napp.get('/auth/evernote', passport.authenticate('evernote', { session: false } ))\napp.get('/auth/evernote/callback',\n  passport.authenticate('evernote', { session: false, failureRedirect: '/login' }),\n  (req, res) => {\n    evernote.setAccessToken(req.user.accessToken)\n    sync()\n    res.redirect('/')\n  }\n)\n\napp.get('/auth/pocket', passport.authenticate('pocket', { session: false } ))\napp.get('/auth/pocket/callback',\n  passport.authenticate('pocket', { session: false, failureRedirect: '/login' }),\n  (req, res) => {\n    pocket.setAccessToken(req.user.accessToken)\n    sync()\n    res.redirect('/')\n  }\n)\n\napp.get('/auth/todoist', passport.authenticate('todoist', { scope: 'data:read_write'}))\napp.get('/auth/todoist/callback',\n  passport.authenticate('todoist', {successRedirect: '/', failureRedirect: '/login'}),\n  (req, res) => {\n    console.log('req:')\n    console.log(req)\n    console.log('res:')\n    console.log(res)\n\n    todoist.accessToken = req.accessToken\n    sync()\n    res.redirect('/')\n  });\n\nconst server = app.listen(process.env.PORT || 8080, () => {\n  const host = server.address().address;\n  const port = server.address().port;\n  console.log('==> 🌎 Listening at http://%s:%s', host, port);\n})\n\nfunction setupPassportStrategies() {\n  let callbackHostName = ''\n  if (env == 'production') {\n    callbackHostName = 'http://dashboard.gr4yscale.com:8080'\n  } else {\n    callbackHostName = 'http://localhost:3000'\n  }\n\n  passport.use(new GoogleStrategy({\n    clientID: process.env.GOOGLE_CLIENT_ID,\n    clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n    callbackURL: callbackHostName + '/auth/google/callback',\n    scope: ['openid', 'email', 'https://www.googleapis.com/auth/calendar', 'https://www.googleapis.com/auth/gmail.readonly']\n  },\n  (accessToken, refreshToken, profile, done) => {\n    profile.accessToken = accessToken\n    return done(null, profile)\n  }))\n\n  passport.use(new EvernoteStrategy({\n    requestTokenURL: 'https://www.evernote.com/oauth',\n    accessTokenURL: 'https://www.evernote.com/oauth',\n    userAuthorizationURL: 'https://www.evernote.com/OAuth.action',\n    consumerKey: process.env.EVERNOTE_CONSUMER_KEY,\n    consumerSecret: process.env.EVERNOTE_CONSUMER_SECRET,\n    callbackURL: callbackHostName + '/auth/evernote/callback'\n  },\n  (accessToken, tokenSecret, profile, done) => {\n    profile.accessToken = accessToken\n    return done(null, profile)\n  }))\n\n  passport.use(new PocketStrategy({\n    consumerKey: process.env.POCKET_CONSUMER_KEY,\n    callbackURL: callbackHostName + '/auth/pocket/callback'\n  },\n  (username, accessToken, done) => {\n      return done(null, {\n          username : username,\n          accessToken : accessToken\n      })\n    })\n  )\n\n  passport.use(new TodoistStrategy({\n      clientID: process.env.TODOIST_CLIENT_ID,\n      clientSecret: process.env.TODOIST_CLIENT_SECRET,\n      callbackURL: callbackHostName + '/auth/todoist/callback'\n    },\n    (accessToken, done) => {\n      console.log('**** todoist auth callback')\n      console.log(accessToken)\n      todoist.accessToken = accessToken\n    })\n  )\n}\n\nfunction sync() {\n  // TOFIX: do a Promise.all([]) but make sure to still emit for the client to update even if we catch an error\n  todoist.synchronize()\n  pinboard.synchronize()\n  gcal.synchronize()\n  evernote.synchronize()\n  gmail.synchronize()\n  github.synchronize()\n  creativeai.synchronize()\n  hackernews.synchronize()\n  pocket.synchronize()\n}\n\nsetInterval(() => {\n  console.log('Syncing datasources...')\n  sync()\n}, syncIntervalMins * 60 * 1000)\n\nsetInterval(() => {\n  io.sockets.emit('synchronized')\n}, 30 * 1000) // every 30 seconds tell the client to update...we aren't waiting for all\n\n\n// TOFIX TO FIX TOFIX !!!\n// I know this is bad, but I'm a badboy so no care.\n// Really we should be using domains, but I've got a library raising an error\n// causing a crash that I don't want to modify for now\nprocess.on('uncaughtException', (err) => {\n  console.log(err);\n})\n\n/////////////////////////////////////////////////////////////// GO GO GO\n\nsetupPassportStrategies()\n\n// synchronization\nconst io = require('socket.io')(server)\nio.on('connection', (socket) => {\n  console.log('A new client opened a socket connection: ')\n})\n\nsync()\n\n\n\n/** WEBPACK FOOTER **\n ** ./server.js\n **/","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/promise\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"dotenv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"dotenv\"\n ** module id = 3\n ** module chunks = 0\n **/","const unirest = require('unirest')\n\n// Login to todoist and store the latest items\n\nexport default class DataSourceTodoist {\n  constructor() {\n    this.accessToken = '2e701fc52c75dd25878e6e1ebc88b20a58fe4fc8'\n    this.items = []\n    // every so often synchronize?\n  }\n\n  synchronize() {\n    if (!this.accessToken) return\n\n    return new Promise((resolve, reject) => {\n      const requestOptions = {\n        token: this.accessToken,\n        seq_no: 0,\n        resource_types: '[\"items\"]'\n      }\n\n      unirest.post('https://todoist.com/API/v7/sync')\n      .send(requestOptions)\n      .end((response) => {\n        this.items = response.body.items\n        console.log('* Fetched Todoist data')\n        resolve(response.body.items)\n      })\n    })\n  }\n\n  dataForScreenItem(screenItem) {\n    let projectId = screenItem.dataSourceOptions.project_id\n    let maxItemCount = screenItem.viewOptions.maxItems\n\n    if (!this.items) {\n      console.log('Todoist datasource has no items')\n      return []\n    }\n    else {\n      return this.items\n      .filter((item) => {\n        // if (item.project_id === 150709951 || item.project_id === 173212883) // inbox and 'mission critical / now' don't need priority\n          return (item.project_id === projectId && item.indent === 1)\n        // else\n          // return (item.project_id === projectId && item.indent === 1 && item.priority > 1)\n      })\n      .sort((a, b) => {\n        return a.item_order - b.item_order\n      })\n      .slice(0, maxItemCount).map((item) => {\n        return {\n          datasource_id : item.id,\n          title: item.content,\n          subtitle: ''\n        }\n      })\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/todoist.js\n **/","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/classCallCheck\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/createClass\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"unirest\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"unirest\"\n ** module id = 8\n ** module chunks = 0\n **/","const Pinboard = require('node-pinboard')\n\n// const unirest = require('unirest')\n\n// Login to todoist and store the latest items\n\nexport default class DataSourcePinboard {\n  constructor() {\n    this.pinboard = new Pinboard(process.env.PINBOARD_API_KEY)\n    this.data = []\n  }\n\n  synchronize() {\n    return new Promise((resolve, reject) => {\n      this.pinboard.all({}, (err, res) => {\n        if (err) {\n          reject(err)\n        } else {\n          let data = Object.values(res)\n          console.log('* Fetched Pinboard data')\n          this.data = data\n          resolve(data)\n        }\n      })\n    })\n  }\n\n  formatData(data) {\n    return data\n    .map((item) => {\n      return {\n        id: item.href,\n        title: item.description,\n        subtitle: item.url\n      }\n    })\n  }\n\n  unreadItems() {\n    let data = this.data.filter((item) => {\n      return item.toread === 'yes'\n    })\n    return this.formatData(data)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/pinboard.js\n **/","module.exports = require(\"babel-runtime/core-js/object/values\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/values\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"node-pinboard\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-pinboard\"\n ** module id = 11\n ** module chunks = 0\n **/","const gcal = require('google-calendar')\nimport moment from 'moment'\n\nconst PRIMARY_CALENDAR_ID = 'gr4yscale@gmail.com'\n\nexport default class DataSourceGCal {\n  constructor() {\n    this.data = []\n    this.accessToken = ''\n  }\n\n  setAccessToken(accessToken) {\n    this.accessToken = accessToken\n  }\n\n  synchronize() {\n    if (this.accessToken === '') {\n      console.log('Skipping Google Calendar sync, not authed!')\n      return Promise.resolve({no: 'data'})\n    } else {\n      return new Promise((resolve, reject) => {\n        let todayString = moment().format()\n        let date1MonthAheadString = moment().add(10, 'days').format()\n        gcal(this.accessToken).events.list(PRIMARY_CALENDAR_ID, {singleEvents: 'true', orderBy: 'startTime', maxResults: 100, timeMin: todayString, timeMax: date1MonthAheadString}, (err, data) => {\n          if (err) {\n            reject(err)\n          } else {\n            this.data = data.items\n            console.log('* Fetched Google Calendar data')\n            resolve(data.items)\n          }\n        })\n      })\n    }\n  }\n\n  formatData(data) {\n    return data\n    .map((item) => {\n      let startDateTime = item.start.dateTime ? item.start.dateTime : item.start.date\n      return {\n        id: item.id,\n        title: item.summary,\n        subtitle: moment(startDateTime).format('MMMM Do YYYY, h:mm:ss a')\n      }\n    })\n  }\n\n  eventsThisMonth() {\n    return this.formatData(this.data)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/gcal.js\n **/","module.exports = require(\"moment\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"google-calendar\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"google-calendar\"\n ** module id = 14\n ** module chunks = 0\n **/","const Evernote = require('evernote').Evernote\nconst ENML = require('enml-js')\n\nexport default class DataSourceEvernote {\n  constructor() {\n    this.accessToken = ''\n    this.data = {\n      scratchpadNoteContent : ''\n    }\n  }\n\n  setAccessToken(accessToken) {\n    this.accessToken = accessToken\n  }\n\n  // TOFIX: give this datasource a list of note ids, and make an accessor\n  // for noteItems by passing in the evernote note guid\n\n  synchronize() {\n    console.log('Syncing evernote....')\n    return new Promise((resolve, reject) => {\n      this.client = new Evernote.Client({token: this.accessToken, sandbox: false})\n      this.noteStore = this.client.getNoteStore()\n\n      // for now I just care about a few specific notes from evernote, this datasource will just provide convenience to their content\n      this.noteStore.getNote(this.accessToken, '79467e95-4a67-4ce2-9fb8-6b6a6f4e70d3', true, false, false, false, (err, note) => {\n        if (err) {\n          console.log('Evernote datasource encountered an error: ' + err)\n          console.log(err)\n          reject(err)\n        } else {\n          try {\n            let plainTextNote = ENML.PlainTextOfENML(note.content)\n            this.data['scratchpadNoteContent'] = plainTextNote.split('\\n').reverse()\n            console.log('* Fetched Evernote data')\n            resolve(this.data)\n          } catch (err) {\n            console.log('* FAILED fetching Evernote data')\n            reject(err)\n          }\n        }\n      })\n    })\n  }\n\n  scratchPadNote(screenItem) {\n    if (!this.data['scratchpadNoteContent']) return\n\n    let maxItemCount = screenItem.viewOptions.maxItems\n\n    return this.data['scratchpadNoteContent']\n      .slice(0, maxItemCount)\n      .map((line) => {\n      return {\n        datasource_id : 'yo',\n        title: line,\n        subtitle: ''\n      }\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/evernote.js\n **/","module.exports = require(\"evernote\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"evernote\"\n ** module id = 16\n ** module chunks = 0\n **/","const Gmail = require('node-gmail-api')\n\nexport default class DataSourceGmail {\n  constructor() {\n    this.accessToken = ''\n    this.data = {\n      starredMessages : []\n    }\n  }\n\n  setAccessToken(accessToken) {\n    this.accessToken = accessToken\n  }\n\n  synchronize() {\n    console.log('Syncing gmail....')\n    return new Promise((resolve, reject) => {\n\n      this.gmail = new Gmail(this.accessToken)\n      this.messagesStream = this.gmail.messages('label:starred', {format: 'metadata', max: 25})\n\n      this.messagesStream.on('data', (data) => {\n        let sanitizedData = {\n          datasource_id: data.id,\n          title: data.snippet,\n          subtitle: ''\n        }\n        this.data.starredMessages.push(sanitizedData)\n      })\n      // TOFIX: this is a hack. messages are streamed in so Promises (like the rest of the datasources use) are awkward here\n      resolve(this.data)\n    })\n  }\n\n  starredMessages() {\n    return this.data.starredMessages\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/gmail.js\n **/","module.exports = require(\"node-gmail-api\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-gmail-api\"\n ** module id = 18\n ** module chunks = 0\n **/","import screensConfig from './screens.json'\n\nexport default class Screens {\n  // FIXME: beauuuuutiful - REFACTOR\n  constructor(todoist, pinboard, gcal, evernote, gmail, github, creativeai, hackernews, pocket) {\n    this.todoist = todoist\n    this.pinboard = pinboard\n    this.gcal = gcal\n    this.evernote = evernote\n    this.gmail = gmail\n    this.github = github\n    this.creativeai = creativeai\n    this.hackernews = hackernews\n    this.pocket = pocket\n  }\n\n  screens() {\n    let screenItems = []\n    for (let screenItem of screensConfig) {\n      // FIXME: we're mutating screenItem here and adding it to an array\n      switch (screenItem.type) {\n        // handle grid screens\n        case 'grid':\n          let gridScreenItems = []\n          for (let gridScreenItem of screenItem.items) {\n            let newData = this.dataForItem(gridScreenItem)\n            let newGridScreenItem = Object.assign({}, gridScreenItem, newData)\n            gridScreenItems.push(newGridScreenItem)\n          }\n          screenItem.items = gridScreenItems\n          break\n        case 'list':\n        case 'singleItem':                                        // for now singleItems get data in an items array to select a single item from\n          let newData = this.dataForListItem(screenItem)\n          screenItem = Object.assign({}, screenItem, newData)\n          break\n      }\n      screenItems.push(screenItem)\n    }\n    return screenItems\n  }\n\n  // FIXME: very obviously in need of a refactor below... no care for now...\n\n  dataForItem(item) {\n    // console.log(item)\n    let newData = {data: ''}\n    switch (item.dataSource) {\n      case 'todoist':\n        newData['data'] = this.todoist.dataForScreenItem(item)\n        break\n      case 'pinboard':\n        newData['data'] = this.pinboard.unreadItems()\n        break\n      case 'gcal':\n        newData['data'] = this.gcal.eventsThisMonth()\n        break\n      case 'gmail':\n        newData['data'] = this.gmail.starredMessages()\n        break\n      case 'github':\n        newData['data'] = this.github.items()\n        break\n      case 'creativeai':\n        newData['data'] = this.creativeai.items()\n        break\n      case 'hackernews':\n        newData['data'] = this.hackernews.items()\n        break\n      case 'evernote':\n        newData['data'] = this.evernote.scratchPadNote(item)\n        break\n      case 'pocket':\n        newData['data'] = this.pocket.favoritedItems()\n        break\n      }\n    return newData\n  }\n\n  dataForListItem(item) {\n    // console.log(item)\n    let newData = {items: []}\n    switch (item.dataSource) {\n      case 'todoist':\n        newData['items'] = this.todoist.dataForScreenItem(item)\n        break\n      case 'pinboard':\n        newData['items'] = this.pinboard.unreadItems()\n        break\n      case 'gcal':\n        newData['items'] = this.gcal.eventsThisMonth()\n        break\n      case 'gmail':\n        newData['items'] = this.gmail.starredMessages()\n        break\n      case 'github':\n        newData['items'] = this.github.items()\n        break\n      case 'creativeai': {\n        console.log(this.creativeai.items())\n        newData['items'] = this.creativeai.items()\n        break\n      }\n      case 'hackernews':\n        newData['items'] = this.hackernews.items()\n        break\n      case 'evernote':\n        newData['items'] = this.evernote.scratchPadNote(item)\n        break\n      case 'pocket':\n        newData['items'] = this.pocket.favoritedItems()\n        break\n      }\n    return newData\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/screens.js\n **/","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/assign\"\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/core-js/get-iterator\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/get-iterator\"\n ** module id = 21\n ** module chunks = 0\n **/","module.exports = [\n\t{\n\t\t\"index\": 0,\n\t\t\"description\": \"Main screen\",\n\t\t\"type\": \"grid\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"index\": 0,\n\t\t\t\t\"description\": \"Calendar\",\n\t\t\t\t\"title\": \"Calendar\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"gcal\",\n\t\t\t\t\"dataSourceOptions\": {},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 1,\n\t\t\t\t\"description\": \"Starred Emails\",\n\t\t\t\t\"title\": \"Starred Emails\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"gmail\",\n\t\t\t\t\"dataSourceOptions\": {},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 10\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 2,\n\t\t\t\t\"title\": \"DO. THIS. NOW.\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 173212883\n\t\t\t\t},\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 10\n\t\t\t\t},\n\t\t\t\t\"sort_order\": 0\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"index\": 1,\n\t\t\"description\": \"Second\",\n\t\t\"type\": \"grid\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"index\": 0,\n\t\t\t\t\"description\": \"Scratchpad\",\n\t\t\t\t\"title\": \"Scratchpad\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"evernote\",\n\t\t\t\t\"dataSourceOptions\": {},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 1,\n\t\t\t\t\"description\": \"Errands/Shopping\",\n\t\t\t\t\"title\": \"Errands/Shopping\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 173212883\n\t\t\t\t},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 2,\n\t\t\t\t\"description\": \"Correspondence\",\n\t\t\t\t\"title\": \"Correspondence\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 158490814\n\t\t\t\t},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t},\n\t\t\t\t\"sort_order\": 0\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"index\": 2,\n\t\t\"description\": \"Third\",\n\t\t\"type\": \"grid\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"index\": 0,\n\t\t\t\t\"description\": \"Reminders\",\n\t\t\t\t\"title\": \"Reminders\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 171391303\n\t\t\t\t},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 1,\n\t\t\t\t\"description\": \"Everyday\",\n\t\t\t\t\"title\": \"Everyday\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 176202332\n\t\t\t\t},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 2,\n\t\t\t\t\"description\": \"Inbox\",\n\t\t\t\t\"title\": \"Inbox\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"todoist\",\n\t\t\t\t\"dataSourceOptions\": {\n\t\t\t\t\t\"project_id\": 150709951\n\t\t\t\t},\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t},\n\t\t\t\t\"sort_order\": 0\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"index\": 3,\n\t\t\"description\": \"Fourth\",\n\t\t\"type\": \"grid\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"index\": 0,\n\t\t\t\t\"description\": \"Pocket Favorites\",\n\t\t\t\t\"title\": \"Pocket Favorites\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"pocket\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 10\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 1,\n\t\t\t\t\"description\": \"Pinboard (unread)\",\n\t\t\t\t\"title\": \"Pinboard (unread)\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"pinboard\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 2,\n\t\t\t\t\"description\": \"Github\",\n\t\t\t\t\"title\": \"Github\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"github\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 15\n\t\t\t\t},\n\t\t\t\t\"sort_order\": 0\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"index\": 4,\n\t\t\"description\": \"Five\",\n\t\t\"type\": \"grid\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"index\": 0,\n\t\t\t\t\"description\": \"Hacker News\",\n\t\t\t\t\"title\": \"Hacker News\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"hackernews\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 20\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"index\": 1,\n\t\t\t\t\"description\": \"CreativeAI\",\n\t\t\t\t\"title\": \"CreativeAI\",\n\t\t\t\t\"gridScreenView\": \"list\",\n\t\t\t\t\"dataSource\": \"creativeai\",\n\t\t\t\t\"viewOptions\": {\n\t\t\t\t\t\"maxItems\": 20\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t}\n];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/models/screens.json\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 25\n ** module chunks = 0\n **/","module.exports = require(\"passport\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport\"\n ** module id = 26\n ** module chunks = 0\n **/","module.exports = require(\"passport-google-oauth\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-google-oauth\"\n ** module id = 27\n ** module chunks = 0\n **/","module.exports = require(\"passport-evernote\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-evernote\"\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = require(\"express-session\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-session\"\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = require(\"socket.io\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"socket.io\"\n ** module id = 30\n ** module chunks = 0\n **/","module.exports = require(\"feedparser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"feedparser\"\n ** module id = 34\n ** module chunks = 0\n **/","module.exports = require(\"request\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 35\n ** module chunks = 0\n **/","const FeedParser = require('feedparser')\n// unfortunately we must use request instead of promises-based axios because FeedParser wants a stream\nconst request = require('request')\n\nexport default class DataSourceRSS {\n  constructor(url, transform) {\n    this.url = url\n    this.data = []\n    if (transform) {\n      this.transform = transform\n    } else {\n      this.transform = (data) => {\n        return {\n          title: data.title,\n          subtitle: '',\n          datasource_id: data.guid,\n          titleUrl: data.link,\n          description: data.description\n        }\n      }\n    }\n  }\n\n  synchronize() {\n    console.log(`Syncing RSS feed: RSS feed: ${this.url}`)\n    return new Promise((resolve, reject) => {\n      let feedparser = new FeedParser()\n\n      let feedParsingComplete = (err) => {\n        if (err) {\n          console.log(`Error parsing RSS feed: ${this.url}`)\n          console.log(err)\n          reject(err)\n        } else {\n          resolve()\n        }\n      }\n\n      // get a reference to data before 'this' scope is changed with ES5 style syntax\n      // Using ES5 function syntax on the below callbacks to capture a reference to the feedparser stream\n      let data = this.data\n\n      // make a stream requesting feed XML and pipe it to FeedParser\n      request.get(this.url)\n              .on('error', feedParsingComplete)\n              .on('response', function (res) {\n                let stream = this  // request response callback is a stream, feedparser wants a stream\n                if (res.statusCode != 200) return this.emit('error', new Error('Bad status code'))\n                stream.pipe(feedparser)\n              })\n\n      // hook up stream callbacks\n      feedparser.on('error', feedParsingComplete)\n      feedparser.on('end', feedParsingComplete)\n\n      feedparser.on('readable', function() {\n        let stream = this\n        let meta = this.meta\n        let item\n\n        while (item = stream.read()) {\n          data.push(item)\n        }\n      })\n    })\n  }\n\n  items() {\n    // transform the data on demand - we could transform it on the end callback of the stream so that it is already ready,\n    // but then there is potential for a race condition without keeping track of \"isStreaming\" state,\n    // which I could have done in the amount of time it took to type this comment. DEAL WITH IT, this is plenty fast enough\n    return this.data.map(this.transform)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/rss.js\n **/","module.exports = require(\"enml-js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"enml-js\"\n ** module id = 37\n ** module chunks = 0\n **/","const unirest = require('unirest')\n\n\nexport default class DataSourcePocket {\n  constructor() {\n    this.data = []\n    this.accessToken = ''\n  }\n\n  setAccessToken(accessToken) {\n    this.accessToken = accessToken\n  }\n\n  // get favorite items only for now\n  synchronize() {\n    console.log('Syncing pocket')\n    return new Promise((resolve, reject) => {\n      let requestOptions = {\n        consumer_key: process.env.POCKET_CONSUMER_KEY,\n        access_token: this.accessToken,\n        favorite: 1\n      }\n      unirest.post('https://getpocket.com/v3/get')\n      .send(requestOptions)\n      .end((response) => {\n        this.data = []\n        let data = response.body.list\n        if (data) {\n          for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n              this.data.push(data[key])\n            }\n          }\n        }\n        resolve(this.data)\n      })\n    })\n  }\n\n  formatData(data) {\n    return data\n    .sort((a, b) => {\n      return parseInt(a.time_favorited) < parseInt(b.time_favorited)\n    })\n    .map((item) => {\n      return {\n        id: item.item_id,\n        title: item.resolved_title,\n        titleUrl: item.resolved_url,\n        subtitle: item.resolved_url\n      }\n    })\n  }\n\n  favoritedItems() {\n    if (this.data) {\n      return this.formatData(this.data)\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/datasources/pocket.js\n **/","module.exports = require(\"passport-pocket\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-pocket\"\n ** module id = 40\n ** module chunks = 0\n **/","module.exports = require(\"passport-todoist\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-todoist\"\n ** module id = 41\n ** module chunks = 0\n **/"],"sourceRoot":""}